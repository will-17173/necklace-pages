/*
 * jQuery plugin gapples v1.0
 * posfixed
 * http://gapples.sinaapp.com/
 *
 * Copyright 2013 gapples.sinaapp.com
 * Released under the GPLv2 license
 * http://gapples.sinaapp.com/license
 * 
 * Written by Boyn Xiong
 * Date: 2013-1-3
 */
(function(a){a.extend(a.fn,{posfixed:function(c){var h={direction:"top",type:"while",hide:false,distance:0};a.extend(h,c);if(a.browser.msie&&a.browser.version==6){a("html").css("overflow","hidden");a("body").css({height:"100%",overflow:"auto"})}var f=this;var d=a(f).offset().top;var e=a(f).offset().left;var b=h.distance;if(h.type=="while"){if(a.browser.msie&&a.browser.version==6){a("body").scroll(function(i){var j=a(f).offset().top-a("body").scrollTop();if(j<=h.distance){a(f).css("position","absolute");a(f).css("top",h.distance+"px");a(f).css("left",e+"px")}if(a(f).offset().top<=d||a(document).width()<950){a(f).css("position","static")}})}else{a(window).scroll(function(i){if(h.direction=="top"){var k=a(f).offset().top-a(window).scrollTop();if(k<=h.distance){a(f).css("position","fixed");a(f).css(h.direction,h.distance+"px")}if(a(f).offset().top<=d||a(document).width()<950){a(f).css("position","static")}}else{var j=a(window).height()-a(f).offset().top+a(window).scrollTop()-a(f).outerHeight();if(j<=h.distance){a(f).css("position","fixed");a(f).css(h.direction,h.distance+"px")}if(a(f).offset().top>=d){a(f).css("position","static")}}})}}if(h.type=="always"){if(a.browser.msie&&a.browser.version==6){if(h.hide){a(f).hide()}a("body").scroll(function(i){if(a("body").scrollTop()>300){a(f).fadeIn(200)}else{a(f).fadeOut(200)}});a(f).css("position","absolute");a(f).css(h.direction,h.distance+"px");if(h.tag!=null){if(h.tag.obj!=null){if(h.tag.direction=="right"){a(f).css("left",(h.tag.obj.offset().left+h.tag.obj.width()+h.tag.distance)+"px");a(window).resize(function(){a(f).css("left",(h.obj.tag.offset().left+h.tag.obj.width()+h.tag.distance)+"px")})}else{console.log(h.tag.obj.offset().left-h.tag.obj.width()-h.tag.distance);a(f).css("left",(h.tag.obj.offset().left-a(f).outerWidth()-h.tag.distance)+"px");a(window).resize(function(){a(f).css("left",(h.tag.obj.offset().left-a(f).outerWidth()-h.tag.distance)+"px")})}}else{a(f).css(h.tag.direction,h.tag.distance+"px")}}}else{if(h.hide){a(f).hide()}a(window).scroll(function(i){if(a(window).scrollTop()>1000){a(f).fadeIn(200)}else{a(f).fadeOut(200)}});var g=a(f).offset().left;a(f).css("position","fixed");a(f).css(h.direction,h.distance+"px");if(h.tag!=null){if(h.tag.obj!=null){if(h.tag.direction=="right"){a(f).css("right","10px");a(window).resize(function(){a(f).css("right","10px")})}else{console.log(h.tag.obj.offset().left-h.tag.obj.width()-h.tag.distance);a(f).css("left",(h.tag.obj.offset().left-a(f).outerWidth()-h.tag.distance)+"px");a(window).resize(function(){a(f).css("left",(h.tag.obj.offset().left-a(f).outerWidth()-h.tag.distance)+"px")})}}else{a(f).css(h.tag.direction,h.tag.distance+"px")}}}}}})})(jQuery);